<!DOCTYPE html>
<html lang="en"> <!-- Lang attribute will be updated by JavaScript -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title will be set by JavaScript -->
    <title>AI-Powered Statistical Lifecycle Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Tailwind gray-100 */
        }
        .step-indicator-btn { /* Renamed for clarity as it's now a button */
            transition: all 0.3s ease-in-out;
            flex: 1 1 0%; /* Ensure buttons take up equal space */
            text-align: center;
            padding: 0.5rem; /* Adjusted padding for smaller buttons */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 0.75rem; /* text-xs */
            line-height: 1rem; /* leading-tight */
            font-weight: 500; /* medium */
            cursor: pointer;
            border: 1px solid #d1d5db; /* gray-300 */
            background-color: white;
            color: #374151; /* gray-700 */
            white-space: nowrap;
            overflow: hidden;
            text-ellipsis: ellipsis;
            min-width: 60px; /* Minimum width for small screens */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .step-indicator-btn {
                font-size: 0.875rem; /* text-sm */
                padding: 0.75rem 0.5rem; /* More padding on larger screens */
            }
        }

        .step-indicator-btn.active {
            background-color: #3b82f6; /* Tailwind blue-500 */
            color: white;
            transform: scale(1.05); /* Slightly smaller scale for active button */
            border-color: #3b82f6;
        }
        .step-indicator-btn.completed {
            background-color: #10b981; /* Tailwind emerald-500 */
            color: white;
            border-color: #10b981;
        }
        .step-indicator-btn:focus-visible { /* Explicit focus styling */
            outline: 2px solid #2563eb; /* blue-600 */
            outline-offset: 2px;
        }

        .content-card {
            min-height: 480px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .primitive-tag {
            background-color: #e0e7ff;
            color: #4338ca;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            margin: 2px;
            display: inline-block;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn-primary { background-color: #3b82f6; color: white; }
        .btn-primary:hover:not(:disabled) { background-color: #2563eb; }
        .btn-secondary { background-color: #6b7280; color: white; }
        .btn-secondary:hover:not(:disabled) { background-color: #4b5563; }
        .btn-danger { background-color: #ef4444; color: white; }
        .btn-danger:hover:not(:disabled) { background-color: #dc2626; }
        .btn-success { background-color: #10b981; color: white; }
        .btn-success:hover:not(:disabled) { background-color: #059669; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .lang-btn {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        .lang-btn.active, .lang-btn[aria-pressed="true"] { /* Style for active and aria-pressed */
            background-color: #3b82f6;
            color: white;
            font-weight: 700;
        }
    </style>
</head>
<body> <!-- HTML lang attribute will be set by JS -->

    <div class="w-full max-w-5xl mx-auto">
        <div class="flex justify-end mb-4 space-x-2">
            <button id="langEnBtn" class="btn btn-secondary lang-btn" aria-pressed="true">English</button>
            <button id="langFrBtn" class="btn btn-secondary lang-btn" aria-pressed="false">FranÃ§ais</button>
        </div>

        <h1 id="mainTitle" class="text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-8">
            <!-- Title will be set by JavaScript -->
        </h1>

        <div id="progressIndicator" class="flex justify-around mb-8 space-x-1 sm:space-x-1" role="tablist" aria-label="Lifecycle Steps">
            <!-- Step indicator buttons will be injected here by JavaScript -->
        </div>

        <div id="contentDisplay" class="bg-white p-6 sm:p-8 rounded-xl shadow-xl content-card" aria-live="polite">
            <!-- Step content will be injected here by JavaScript -->
        </div>

        <div class="mt-8 flex flex-wrap justify-center gap-2 sm:gap-4">
            <button id="runDemoBtn" class="btn btn-success"></button>
            <button id="stopDemoBtn" class="btn btn-danger" disabled></button>
            <button id="prevStepBtn" class="btn btn-secondary" disabled></button>
            <button id="nextStepBtn" class="btn btn-primary"></button>
            <button id="resetDemoBtn" class="btn btn-secondary"></button>
        </div>
        <p id="statusDisplay" class="text-center mt-4 text-sm text-gray-600" aria-live="polite"></p>
    </div>

    <script>
        let currentLanguage = 'en';
        const uiStrings = {
            en: {
                mainTitle: "AI-Powered Statistical Lifecycle Demo (GSBPM & UN Standards)",
                docTitle: "AI Statistical Lifecycle Demo (GSBPM & UN Standards)",
                runDemo: "Run Demo",
                stopDemo: "Stop Demo",
                prevStep: "Previous Step",
                nextStep: "Next Step",
                resetDemo: "Reset Demo",
                statusIdle: "Status: Idle. Press 'Run Demo' or 'Next Step'.",
                statusRunning: "Status: Demo Running...",
                statusCompleted: "Status: Demo completed!",
                statusStopped: "Status: Demo Stopped.",
                statusReset: "Status: Demo Reset. Press 'Run Demo' or 'Next Step'.",
                stepIndicatorPrefix: "Step",
                keyPrimitives: "Key AI Primitives:",
                stepLabelPrefix: "Go to step"
            },
            fr: {
                mainTitle: "DÃ©mo du cycle de vie statistique assistÃ© par IA (GSBPM et normes de l'ONU)",
                docTitle: "DÃ©mo du cycle de vie statistique IA (GSBPM et normes ONU)",
                runDemo: "Lancer la dÃ©mo",
                stopDemo: "ArrÃªter la dÃ©mo",
                prevStep: "Ã‰tape prÃ©cÃ©dente",
                nextStep: "Ã‰tape suivante",
                resetDemo: "RÃ©initialiser",
                statusIdle: "Statut : Inactif. Appuyez sur 'Lancer la dÃ©mo' ou 'Ã‰tape suivante'.",
                statusRunning: "Statut : DÃ©mo en cours...",
                statusCompleted: "Statut : DÃ©mo terminÃ©e !",
                statusStopped: "Statut : DÃ©mo arrÃªtÃ©e.",
                statusReset: "Statut : DÃ©mo rÃ©initialisÃ©e. Appuyez sur 'Lancer la dÃ©mo' ou 'Ã‰tape suivante'.",
                stepIndicatorPrefix: "Ã‰tape",
                keyPrimitives: "Primitives d'IA clÃ©s :",
                stepLabelPrefix: "Aller Ã  l'Ã©tape"
            }
        };

        const steps = [
            {
                id: 1,
                title: { en: "1. Specify Needs ðŸŽ¯", fr: "1. PrÃ©ciser les besoins ðŸŽ¯" },
                description: { en: "AI assists in defining statistical objectives by analyzing user requests, policy documents, and existing literature. This aligns with UN Fundamental Principles of Official Statistics (UNFPOS) like Principle 1 (Relevance, Impartiality, Equal Access), ensuring outputs meet societal needs and inform public discourse, potentially linking to SDGs. AI tools can perform gap analyses against national strategies.", fr: "L'IA aide Ã  dÃ©finir les objectifs statistiques en analysant les demandes des utilisateurs, les documents de politique et la littÃ©rature existante. Ceci s'aligne sur les Principes fondamentaux des statistiques officielles des Nations Unies (PFSO NU) tels que le Principe 1 (Pertinence, impartialitÃ© et Ã©galitÃ© d'accÃ¨s), garantissant que les extrants rÃ©pondent aux besoins sociÃ©taux et Ã©clairent le discours public, potentiellement en lien avec les ODD. Les outils d'IA peuvent effectuer des analyses d'Ã©carts par rapport aux stratÃ©gies nationales." },
                primitives: [
                    { en: "Agent (Requirements Analyst, Policy Scanner)", fr: "Agent (Analyste des besoins, Analyseur de politiques)" },
                    { en: "Tools (NLU for Document Analysis, Knowledge Graph Search, SDG Mapping)", fr: "Outils (TALN pour analyse de documents, Recherche graphe de connaissances, Cartographie ODD)" },
                    { en: "Context (Existing Reports, User Requests, UNFPOS Guidelines)", fr: "Contexte (Rapports existants, Demandes utilisateurs, Directives PFSO NU)" },
                    { en: "Output Types (Requirement Specifications, Feasibility Studies, Gap Analysis Reports)", fr: "Types d'extrants (SpÃ©cifications des besoins, Ã‰tudes de faisabilitÃ©, Rapports d'analyse des Ã©carts)" },
                    { en: "Tracing (Information Sources, Decision Rationale, Stakeholder Inputs)", fr: "TraÃ§abilitÃ© (Sources d'information, Justification dÃ©cisions, Contributions parties prenantes)" },
                    { en: "Guardrails (Bias Detection in Source Material, Alignment with National Statistical Plans)", fr: "Garde-fous (DÃ©tection biais sources, Alignement plans statistiques nationaux)" }
                ],
                visualEmoji: "ðŸŽ¯ðŸ”ðŸ‡ºðŸ‡³"
            },
            {
                id: 2,
                title: { en: "2. Design âœï¸", fr: "2. Conception âœï¸" },
                description: { en: "AI supports designing methodologies, collection instruments, sampling frames, and processing workflows. This adheres to UNFPOS Principle 2 (Professional Standards & Ethics) and Principle 5 (Cost-Effectiveness) by optimizing question wording for clarity and neutrality, ensuring statistical validity, and considering international comparability (e.g., using UN-endorsed classifications like ISIC). AI can simulate sampling strategies and model data structures for efficiency and privacy by design.", fr: "L'IA appuie la conception des mÃ©thodologies, des instruments de collecte, des bases de sondage et des flux de travail de traitement. Ceci respecte le Principe 2 (Normes professionnelles et Ã©thique) et le Principe 5 (Rapport coÃ»t-efficacitÃ©) des PFSO NU en optimisant la formulation des questions pour la clartÃ© et la neutralitÃ©, en assurant la validitÃ© statistique et en tenant compte de la comparabilitÃ© internationale (p. ex., en utilisant des classifications approuvÃ©es par l'ONU comme la CITI). L'IA peut simuler des stratÃ©gies d'Ã©chantillonnage et modÃ©liser des structures de donnÃ©es pour l'efficacitÃ© et la protection de la vie privÃ©e dÃ¨s la conception." },
                primitives: [
                    { en: "Agent (Methodology Designer, Survey Architect, Ethics Advisor)", fr: "Agent (Concepteur mÃ©thodologique, Architecte d'enquÃªte, Conseiller en Ã©thique)" },
                    { en: "Tools (Questionnaire Optimization, Sampling Simulators, Workflow Design Tools, Data Modeling Aids, Privacy Impact Assessment Tools)", fr: "Outils (Optimisation questionnaires, Simulateurs d'Ã©chantillonnage, Outils conception flux, Aides modÃ©lisation donnÃ©es, Ã‰valuations d'impact vie privÃ©e)" },
                    { en: "Context (Specified Needs, UN Methodological Handbooks, Classification Standards)", fr: "Contexte (Besoins spÃ©cifiÃ©s, Manuels mÃ©thodologiques ONU, Normes de classification)" },
                    { en: "Output Types (Survey Design Specifications, Sample Plans, Process Blueprints, Data Quality Assurance Frameworks)", fr: "Types d'extrants (SpÃ©cifications conception enquÃªte, Plans d'Ã©chantillonnage, SchÃ©mas directeurs processus, Cadres assurance qualitÃ© donnÃ©es)" },
                    { en: "Tracing (Design Decisions, Version Control, Ethical Reviews)", fr: "TraÃ§abilitÃ© (DÃ©cisions conception, Gestion versions, Examens Ã©thiques)" },
                    { en: "Guardrails (Ethical Design, Respondent Burden Minimization, Statistical Soundness, Data Security Protocols)", fr: "Garde-fous (Conception Ã©thique, Minimisation fardeau rÃ©pondant, ValiditÃ© statistique, Protocoles sÃ©curitÃ© donnÃ©es)" }
                ],
                visualEmoji: "âœï¸ðŸ“ŠðŸ›¡ï¸"
            },
            {
                id: 3,
                title: { en: "3. Build ðŸ› ï¸", fr: "3. Construction ðŸ› ï¸" },
                description: { en: "AI aids in constructing and configuring data collection tools (e.g., CAPI/CAWI systems), data ingestion pipelines, and analytical environments. This phase emphasizes UNFPOS Principle 5 (Cost-Effectiveness) through automation and use of common platforms. AI-driven automated testing and validation ensure systems are robust and align with design specifications and UN quality guidelines for IT infrastructure.", fr: "L'IA aide Ã  construire et Ã  configurer les outils de collecte de donnÃ©es (p. ex., systÃ¨mes ITAO/ITAWEB), les pipelines d'ingestion de donnÃ©es et les environnements analytiques. Cette phase met l'accent sur le Principe 5 (Rapport coÃ»t-efficacitÃ©) des PFSO NU par l'automatisation et l'utilisation de plateformes communes. Les tests et la validation automatisÃ©s par l'IA garantissent la robustesse des systÃ¨mes et leur alignement sur les spÃ©cifications de conception et les directives de qualitÃ© de l'ONU pour l'infrastructure TI." },
                primitives: [
                    { en: "Agent (System Builder, Automation Engineer, QA Specialist)", fr: "Agent (Constructeur de systÃ¨mes, IngÃ©nieur automatisation, SpÃ©cialiste AQ)" },
                    { en: "Tools (Code Generation for Instruments, Platform Configuration APIs, Test Data Generators, CI/CD Integration, Security Scanners)", fr: "Outils (GÃ©nÃ©ration code instruments, API configuration plateforme, GÃ©nÃ©rateurs donnÃ©es test, IntÃ©gration CI/CD, Scanneurs sÃ©curitÃ©)" },
                    { en: "Context (Design Specifications, Technical Stack, UN IT Security Guidelines)", fr: "Contexte (SpÃ©cifications conception, Pile technologique, Directives sÃ©curitÃ© TI ONU)" },
                    { en: "Output Types (Working Collection Instrument, Validated Processing Pipeline, Test Suites, System Documentation)", fr: "Types d'extrants (Instrument collecte fonctionnel, Pipeline traitement validÃ©, Suites de tests, Documentation systÃ¨me)" },
                    { en: "Tracing (Build Logs, Test Results, Deployment Records, Security Audits)", fr: "TraÃ§abilitÃ© (Journaux construction, RÃ©sultats tests, Enregistrements dÃ©ploiement, Audits sÃ©curitÃ©)" },
                    { en: "Guardrails (Security Standards Compliance, Usability Testing, Performance Benchmarks, Interoperability Standards)", fr: "Garde-fous (ConformitÃ© normes sÃ©curitÃ©, Tests utilisabilitÃ©, Analyses comparatives performance, Normes interopÃ©rabilitÃ©)" }
                ],
                visualEmoji: "âš™ï¸ðŸ’»âœ…"
            },
            {
                id: 4,
                title: { en: "4. Collect ðŸ“¥", fr: "4. Collecte ðŸ“¥" },
                description: { en: "AI agents manage data collection, potentially using adaptive questioning to reduce burden (UNFPOS Principle 5) and ensuring confidentiality (UNFPOS Principle 6). Real-time validation improves data quality at source. AI can monitor collection progress and manage respondent interactions ethically, adhering to informed consent and data protection principles as outlined in UN guidelines.", fr: "Les agents d'IA gÃ¨rent la collecte de donnÃ©es, utilisant potentiellement des questionnaires adaptatifs pour rÃ©duire le fardeau (Principe 5 des PFSO NU) et assurer la confidentialitÃ© (Principe 6 des PFSO NU). La validation en temps rÃ©el amÃ©liore la qualitÃ© des donnÃ©es Ã  la source. L'IA peut surveiller les progrÃ¨s de la collecte et gÃ©rer les interactions avec les rÃ©pondants de maniÃ¨re Ã©thique, en respectant le consentement Ã©clairÃ© et les principes de protection des donnÃ©es dÃ©crits dans les directives de l'ONU." },
                primitives: [
                    { en: "Agent (Collection Administrator, Data Capture Specialist, Ethics Monitor)", fr: "Agent (Administrateur collecte, SpÃ©cialiste saisie donnÃ©es, Moniteur Ã©thique)" },
                    { en: "Tools (Survey APIs, Real-time Validation Rules, NLU for Voice/Text Input, Adaptive Questioning Engines, Consent Management Systems)", fr: "Outils (API d'enquÃªte, RÃ¨gles validation temps rÃ©el, TALN pour saisie vocale/texte, Moteurs questionnement adaptatif, SystÃ¨mes gestion consentement)" },
                    { en: "Context (Respondent Session Data, Built Instrument, Sampling Targets, UN Data Collection Ethics)", fr: "Contexte (DonnÃ©es session rÃ©pondant, Instrument construit, Cibles d'Ã©chantillonnage, Ã‰thique collecte donnÃ©es ONU)" },
                    { en: "Output Types (Raw Structured Data, Collection Metadata, Consent Logs)", fr: "Types d'extrants (DonnÃ©es brutes structurÃ©es, MÃ©tadonnÃ©es collecte, Journaux consentement)" },
                    { en: "Streaming (Live Data Feeds, Monitoring Dashboards)", fr: "Diffusion en continu (Flux donnÃ©es direct, Tableaux bord suivi)" },
                    { en: "Tracing (Collection Events, Timestamps, Source Information, Consent Records)", fr: "TraÃ§abilitÃ© (Ã‰vÃ©nements collecte, Horodatages, Information source, Enregistrements consentement)" },
                    { en: "Guardrails (Input Data Validity, Consent Verification, Respondent Burden Limits, Data Transmission Security)", fr: "Garde-fous (ValiditÃ© donnÃ©es entrÃ©e, VÃ©rification consentement, Limites fardeau rÃ©pondant, SÃ©curitÃ© transmission donnÃ©es)" }
                ],
                visualEmoji: "ðŸ“Šâž¡ï¸ðŸ“¥ðŸ”’"
            },
            {
                id: 5,
                title: { en: "5. Process âš™ï¸", fr: "5. Traitement âš™ï¸" },
                description: { en: "AI agents clean data, classify/code variables (using NLU for open-ends, aligning with UN standard classifications like ISCO or COICOP), integrate sources, validate against rules, detect outliers, and impute missing data. This aligns with UNFPOS Principle 2 (Professional Standards) and Principle 4 (Prevention of Misuse). AI ensures processing steps are documented and auditable, supporting metadata management (e.g., SDMX).", fr: "Les agents d'IA nettoient les donnÃ©es, classifient/codent les variables (utilisant l'analyse du langage naturel pour les questions ouvertes, en s'alignant sur les classifications normalisÃ©es de l'ONU comme la CITP ou la COICOP), intÃ¨grent les sources, valident par rapport aux rÃ¨gles, dÃ©tectent les valeurs aberrantes et imputent les donnÃ©es manquantes. Ceci s'aligne sur le Principe 2 (Normes professionnelles) et le Principe 4 (PrÃ©vention des abus) des PFSO NU. L'IA garantit que les Ã©tapes de traitement sont documentÃ©es et vÃ©rifiables, soutenant la gestion des mÃ©tadonnÃ©es (p. ex., SDMX)." },
                primitives: [
                    { en: "Agent (Data Processor, Coder, Validator, Imputation Specialist, Metadata Manager)", fr: "Agent (Processeur donnÃ©es, Codeur, Valideur, SpÃ©cialiste imputation, Gestionnaire mÃ©tadonnÃ©es)" },
                    { en: "Tools (NLU for Coding, Classification Models, Rule Engines, Outlier Detection, Imputation Algorithms, SDMX Tools, Data Transformation Libraries)", fr: "Outils (TALN pour codage, ModÃ¨les classification, Moteurs rÃ¨gles, DÃ©tection valeurs aberrantes, Algorithmes imputation, Outils SDMX, BibliothÃ¨ques transformation donnÃ©es)" },
                    { en: "Context (Codeframes, UN Classifications, Validation Rules, Dataset Schemas)", fr: "Contexte (Cadres codage, Classifications ONU, RÃ¨gles validation, SchÃ©mas jeux donnÃ©es)" },
                    { en: "Output Types (Cleaned, Coded, Integrated, Imputed Dataset with Rich Metadata)", fr: "Types d'extrants (Jeu donnÃ©es nettoyÃ©, codÃ©, intÃ©grÃ©, imputÃ© avec mÃ©tadonnÃ©es riches)" },
                    { en: "Handoffs (Human Review for Complex Cases, Anomaly Resolution)", fr: "Transferts (Examen humain cas complexes, RÃ©solution anomalies)" },
                    { en: "Tracing (All Processing Steps, Versioning of Datasets, Quality Indicators)", fr: "TraÃ§abilitÃ© (Toutes Ã©tapes traitement, Gestion versions jeux donnÃ©es, Indicateurs qualitÃ©)" },
                    { en: "Guardrails (Data Integrity, Imputation Bias Minimization, Adherence to Standard Codes, Audit Trails)", fr: "Garde-fous (IntÃ©gritÃ© donnÃ©es, Minimisation biais imputation, Respect codes normalisÃ©s, Pistes vÃ©rification)" }
                ],
                visualEmoji: "ðŸ§¹ðŸ§©ðŸ·ï¸â“‚ï¸"
            },
            {
                id: 6,
                title: { en: "6. Analyse ðŸ“ˆ", fr: "6. Analyse ðŸ“ˆ" },
                description: { en: "AI performs statistical analysis, generates descriptive/inferential statistics, and applies ML for insights, adhering to UNFPOS Principle 2 (Professional Standards) and Principle 4 (Prevention of Misuse). AI assists in objective interpretation and hypothesis generation, ensuring methods are transparent. Statistical Disclosure Control (SDC) techniques, guided by UN principles, can be applied by AI to protect confidentiality in analytical outputs.", fr: "L'IA effectue des analyses statistiques, gÃ©nÃ¨re des statistiques descriptives/infÃ©rentielles et applique l'apprentissage machine pour obtenir des informations, en respectant le Principe 2 (Normes professionnelles) et le Principe 4 (PrÃ©vention des abus) des PFSO NU. L'IA aide Ã  l'interprÃ©tation objective et Ã  la gÃ©nÃ©ration d'hypothÃ¨ses, assurant la transparence des mÃ©thodes. Les techniques de contrÃ´le de la divulgation statistique (CDS), guidÃ©es par les principes de l'ONU, peuvent Ãªtre appliquÃ©es par l'IA pour protÃ©ger la confidentialitÃ© des rÃ©sultats analytiques." },
                primitives: [
                    { en: "Agent (Statistical Analyst, Insight Generator, SDC Specialist)", fr: "Agent (Analyste statistique, GÃ©nÃ©rateur d'aperÃ§us, SpÃ©cialiste CDS)" },
                    { en: "Tools (Statistical Libraries, ML Algorithms, Visualization Tools, NLG for Summaries, SDC Software)", fr: "Outils (BibliothÃ¨ques statistiques, Algorithmes AM, Outils visualisation, GLN pour rÃ©sumÃ©s, Logiciels CDS)" },
                    { en: "Context (Processed Dataset, Research Questions, UN Analytical Handbooks)", fr: "Contexte (Jeu donnÃ©es traitÃ©, Questions recherche, Manuels analytiques ONU)" },
                    { en: "Output Types (Statistical Summaries, Predictive Models, Visualizations, Anonymized Microdata Insights)", fr: "Types d'extrants (RÃ©sumÃ©s statistiques, ModÃ¨les prÃ©dictifs, Visualisations, AperÃ§us microdonnÃ©es anonymisÃ©es)" },
                    { en: "Handoffs (Human Analyst for Final Interpretation, Contextualization, Policy Relevance)", fr: "Transferts (Analyste humain pour interprÃ©tation finale, contextualisation, pertinence politique)" },
                    { en: "Tracing (Analytical Workflow, Model Parameters, Code, SDC Parameters Applied)", fr: "TraÃ§abilitÃ© (Flux travail analytique, ParamÃ¨tres modÃ¨le, Code, ParamÃ¨tres CDS appliquÃ©s)" },
                    { en: "Guardrails (Statistical Validity, Avoidance of Over-Interpretation, Confidentiality Protection, Ethical Use of AI in Analysis)", fr: "Garde-fous (ValiditÃ© statistique, Ã‰vitement surinterprÃ©tation, Protection confidentialitÃ©, Utilisation Ã©thique IA en analyse)" }
                ],
                visualEmoji: "ðŸ§©âž¡ï¸ðŸ’¡ðŸ›¡ï¸"
            },
            {
                id: 7,
                title: { en: "7. Disseminate ðŸ“„", fr: "7. Diffusion ðŸ“„" },
                description: { en: "AI assists in creating accessible and understandable data tables, charts, and reports tailored to diverse audiences, upholding UNFPOS Principle 1 (Equal Access) and Principle 3 (Accountability & Transparency). NLG can draft summaries. AI helps ensure outputs meet UN data dissemination standards, including comprehensive metadata (e.g., using SDMX), clear caveats, and adherence to release calendars. Anonymization for public use files is critical.", fr: "L'IA aide Ã  crÃ©er des tableaux de donnÃ©es, des graphiques et des rapports accessibles et comprÃ©hensibles, adaptÃ©s Ã  divers publics, respectant le Principe 1 (Ã‰galitÃ© d'accÃ¨s) et le Principe 3 (ResponsabilitÃ© et transparence) des PFSO NU. La gÃ©nÃ©ration de langage naturel (GLN) peut rÃ©diger des rÃ©sumÃ©s. L'IA aide Ã  garantir que les extrants respectent les normes de diffusion des donnÃ©es de l'ONU, y compris des mÃ©tadonnÃ©es complÃ¨tes (p. ex., utilisant SDMX), des mises en garde claires et le respect des calendriers de publication. L'anonymisation des fichiers Ã  grande diffusion est essentielle." },
                primitives: [
                    { en: "Agent (Report Generator, Dissemination Specialist, Accessibility Checker)", fr: "Agent (GÃ©nÃ©rateur rapports, SpÃ©cialiste diffusion, VÃ©rificateur accessibilitÃ©)" },
                    { en: "Tools (Templating Engines, Document/Web Formatters, NLG Models, Visualization APIs, SDMX for Dissemination, Anonymization Tools)", fr: "Outils (Moteurs modÃ¨les, Formateurs documents/web, ModÃ¨les GLN, API visualisation, SDMX pour diffusion, Outils anonymisation)" },
                    { en: "Context (Analysis Results, Audience Profiles, UN Style Guides, Dissemination Policies)", fr: "Contexte (RÃ©sultats analyse, Profils public, Guides style ONU, Politiques diffusion)" },
                    { en: "Output Types (Formatted Reports, Interactive Dashboards, API Endpoints, Public Use Microdata Files, Press Releases)", fr: "Types d'extrants (Rapports formatÃ©s, Tableaux bord interactifs, Points terminaison API, Fichiers microdonnÃ©es grande diffusion, CommuniquÃ©s presse)" },
                    { en: "Tracing (Dissemination Logs, Version Control, Access Statistics, User Feedback Channels)", fr: "TraÃ§abilitÃ© (Journaux diffusion, Gestion versions, Statistiques accÃ¨s, Canaux rÃ©troaction utilisateurs)" },
                    { en: "Guardrails (Disclosure Control, Accessibility Standards (WCAG), Clarity, Accuracy, Timeliness, Impartiality in Presentation)", fr: "Garde-fous (ContrÃ´le divulgation, Normes accessibilitÃ© (WCAG), ClartÃ©, Exactitude, ActualitÃ©, ImpartialitÃ© prÃ©sentation)" }
                ],
                visualEmoji: "ðŸ’¡âž¡ï¸ðŸ“–ðŸŒ"
            },
            {
                id: 8,
                title: { en: "8. Evaluate ðŸ¤”", fr: "8. Ã‰valuation ðŸ¤”" },
                description: { en: "AI helps evaluate the quality of statistical outputs against UN quality assurance frameworks (e.g., UN NQAF), the efficiency of the GSBPM process, and gathers user feedback for continuous improvement (UNFPOS Principle 2 & 3). AI can analyze process logs, performance metrics, and textual feedback to identify bottlenecks and suggest optimizations, ensuring accountability and learning.", fr: "L'IA aide Ã  Ã©valuer la qualitÃ© des extrants statistiques par rapport aux cadres d'assurance qualitÃ© de l'ONU (p. ex., CNQA NU), l'efficacitÃ© du processus GSBPM, et recueille les commentaires des utilisateurs pour une amÃ©lioration continue (Principes 2 et 3 des PFSO NU). L'IA peut analyser les journaux de processus, les mesures de performance et les commentaires textuels pour identifier les goulots d'Ã©tranglement et suggÃ©rer des optimisations, assurant la responsabilitÃ© et l'apprentissage." },
                primitives: [
                    { en: "Agent (Process Evaluator, Quality Assurance Analyst, Feedback Analyst)", fr: "Agent (Ã‰valuateur processus, Analyste assurance qualitÃ©, Analyste rÃ©troaction)" },
                    { en: "Tools (Performance Monitoring Dashboards, NLU for Feedback Analysis, Anomaly Detection in Logs, Benchmarking Tools, UN NQAF Checklists)", fr: "Outils (Tableaux bord suivi performance, TALN pour analyse rÃ©troaction, DÃ©tection anomalies journaux, Outils analyse comparative, Listes contrÃ´le CNQA NU)" },
                    { en: "Context (Process Logs, Output Quality Metrics, User Feedback, Cost Information, UN Evaluation Guidelines)", fr: "Contexte (Journaux processus, Mesures qualitÃ© extrants, RÃ©troaction utilisateurs, Informations coÃ»ts, Directives Ã©valuation ONU)" },
                    { en: "Output Types (Evaluation Reports, KPIs, Improvement Recommendations, Lessons Learned Documentation, Updated Quality Frameworks)", fr: "Types d'extrants (Rapports Ã©valuation, IPC, Recommandations amÃ©lioration, Documentation leÃ§ons apprises, Cadres qualitÃ© mis Ã  jour)" },
                    { en: "Tracing (Evaluation Data, Feedback Sources, Metric Calculations, Implemented Changes)", fr: "TraÃ§abilitÃ© (DonnÃ©es Ã©valuation, Sources rÃ©troaction, Calculs mesures, Changements mis Å“uvre)" },
                    { en: "Guardrails (Objectivity in Evaluation, Constructive Feedback, Actionable Recommendations, Transparency of Evaluation Process)", fr: "Garde-fous (ObjectivitÃ© Ã©valuation, RÃ©troaction constructive, Recommandations concrÃ¨tes, Transparence processus Ã©valuation)" }
                ],
                visualEmoji: "ðŸ¤”ðŸ”„ðŸŒŸ"
            }
        ];

        let currentStepIndex = 0;
        let demoInterval = null;

        const mainTitleEl = document.getElementById('mainTitle');
        const progressIndicatorEl = document.getElementById('progressIndicator');
        const contentDisplayEl = document.getElementById('contentDisplay');
        const runDemoBtn = document.getElementById('runDemoBtn');
        const stopDemoBtn = document.getElementById('stopDemoBtn');
        const prevStepBtn = document.getElementById('prevStepBtn');
        const nextStepBtn = document.getElementById('nextStepBtn');
        const resetDemoBtn = document.getElementById('resetDemoBtn');
        const statusDisplayEl = document.getElementById('statusDisplay');
        const langEnBtn = document.getElementById('langEnBtn');
        const langFrBtn = document.getElementById('langFrBtn');

        function updateUIText() {
            document.documentElement.lang = currentLanguage; 
            document.title = uiStrings[currentLanguage].docTitle;
            mainTitleEl.textContent = uiStrings[currentLanguage].mainTitle;
            runDemoBtn.textContent = uiStrings[currentLanguage].runDemo;
            stopDemoBtn.textContent = uiStrings[currentLanguage].stopDemo;
            prevStepBtn.textContent = uiStrings[currentLanguage].prevStep;
            nextStepBtn.textContent = uiStrings[currentLanguage].nextStep;
            resetDemoBtn.textContent = uiStrings[currentLanguage].resetDemo;
            
            if (demoInterval) {
                statusDisplayEl.textContent = uiStrings[currentLanguage].statusRunning;
            } else if (currentStepIndex === steps.length - 1 && !runDemoBtn.disabled) {
                 statusDisplayEl.textContent = uiStrings[currentLanguage].statusCompleted;
            } else {
                const otherLang = currentLanguage === 'en' ? 'fr' : 'en';
                if (statusDisplayEl.textContent.includes(uiStrings[otherLang].statusReset.split(':')[1].trim()) ||
                    statusDisplayEl.textContent.includes(uiStrings[otherLang].statusIdle.split(':')[1].trim()) ||
                    (currentStepIndex === 0 && !demoInterval)) {
                     statusDisplayEl.textContent = uiStrings[currentLanguage].statusIdle;
                } else if (statusDisplayEl.textContent.includes(uiStrings[otherLang].statusStopped.split(':')[1].trim())) {
                    statusDisplayEl.textContent = uiStrings[currentLanguage].statusStopped;
                } else if (statusDisplayEl.textContent.includes(uiStrings[otherLang].statusCompleted.split(':')[1].trim())) {
                    statusDisplayEl.textContent = uiStrings[currentLanguage].statusCompleted;
                } else {
                    statusDisplayEl.textContent = uiStrings[currentLanguage].statusIdle;
                }
            }

            langEnBtn.setAttribute('aria-pressed', currentLanguage === 'en');
            langFrBtn.setAttribute('aria-pressed', currentLanguage === 'fr');
            langEnBtn.classList.toggle('active', currentLanguage === 'en');
            langFrBtn.classList.toggle('active', currentLanguage === 'fr');

            initializeProgressIndicator();
            displayStepContent(currentStepIndex);
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            updateUIText();
        }

        function initializeProgressIndicator() {
            progressIndicatorEl.innerHTML = '';
            steps.forEach((step, index) => {
                const stepButton = document.createElement('button');
                stepButton.classList.add('step-indicator-btn');
                const indicatorTitleText = step.title[currentLanguage].split(" ")[1] || `${uiStrings[currentLanguage].stepIndicatorPrefix} ${step.id}`;
                stepButton.textContent = indicatorTitleText;
                stepButton.setAttribute('aria-label', `${uiStrings[currentLanguage].stepLabelPrefix} ${step.id}: ${step.title[currentLanguage]}`);
                stepButton.setAttribute('role', 'tab');
                stepButton.setAttribute('aria-selected', 'false');
                stepButton.dataset.index = index;
                stepButton.onclick = () => {
                    if (demoInterval) stopDemo(false);
                    goToStep(index);
                    if (!demoInterval) statusDisplayEl.textContent = uiStrings[currentLanguage].statusIdle;
                };
                progressIndicatorEl.appendChild(stepButton);
            });
            updateProgressIndicator();
        }

        function updateProgressIndicator() {
            const indicators = progressIndicatorEl.querySelectorAll('.step-indicator-btn');
            indicators.forEach((indicator, index) => {
                indicator.classList.remove('active', 'completed');
                indicator.setAttribute('aria-selected', 'false');
                indicator.removeAttribute('aria-current'); 
                if (index < currentStepIndex) {
                    indicator.classList.add('completed');
                } else if (index === currentStepIndex) {
                    indicator.classList.add('active');
                    indicator.setAttribute('aria-selected', 'true');
                    indicator.setAttribute('aria-current', 'step');
                }
            });
        }
        
        function displayStepContent(stepIndex) {
            const step = steps[stepIndex];
            contentDisplayEl.innerHTML = `
                <div class="fade-in" role="tabpanel" id="step-panel-${step.id}" aria-labelledby="step-btn-${step.id}">
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">${step.title[currentLanguage]}</h2>
                    <p class="text-6xl sm:text-7xl text-center my-4 sm:my-6" aria-hidden="true">${step.visualEmoji || 'ðŸ”„'}</p>
                    <p class="text-gray-700 mb-4 text-sm sm:text-base leading-relaxed">${step.description[currentLanguage]}</p>
                    <div>
                        <h3 class="text-sm sm:text-md font-semibold text-gray-700 mb-2 mt-4">${uiStrings[currentLanguage].keyPrimitives}</h3>
                        <div class="flex flex-wrap gap-1">
                            ${step.primitives.map(p => `<span class="primitive-tag">${p[currentLanguage]}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            const currentIndicatorButton = progressIndicatorEl.querySelector(`.step-indicator-btn[data-index="${stepIndex}"]`);
            if(currentIndicatorButton) {
                currentIndicatorButton.id = `step-btn-${step.id}`;
            }

            updateButtonStates();
            updateProgressIndicator();
        }

        function updateButtonStates() {
            prevStepBtn.disabled = currentStepIndex === 0;
            nextStepBtn.disabled = currentStepIndex === steps.length - 1;
            runDemoBtn.disabled = demoInterval !== null || currentStepIndex === steps.length - 1;
            stopDemoBtn.disabled = demoInterval === null;
        }

        function goToStep(stepIndex) {
            currentStepIndex = stepIndex;
            displayStepContent(currentStepIndex);
        }

        function nextStep(isDemoRun = false) {
            if (currentStepIndex < steps.length - 1) {
                currentStepIndex++;
                displayStepContent(currentStepIndex);
            } else if (demoInterval) {
                stopDemo();
                statusDisplayEl.textContent = uiStrings[currentLanguage].statusCompleted;
            }
            if (!isDemoRun && demoInterval) {
                stopDemo();
            }
        }

        function prevStep() {
            if (demoInterval) {
                stopDemo();
            }
            if (currentStepIndex > 0) {
                currentStepIndex--;
                displayStepContent(currentStepIndex);
            }
        }

        function runDemo() {
            if (demoInterval) return; 
            
            if (currentStepIndex === steps.length - 1) {
                resetDemo(false);
            }

            statusDisplayEl.textContent = uiStrings[currentLanguage].statusRunning;
            demoInterval = setInterval(() => {
                if (currentStepIndex < steps.length - 1) {
                    nextStep(true);
                } else {
                    stopDemo();
                    statusDisplayEl.textContent = uiStrings[currentLanguage].statusCompleted;
                }
            }, 4000);
            updateButtonStates();
        }

        function stopDemo(updateStatus = true) {
            clearInterval(demoInterval);
            demoInterval = null;
            if (updateStatus) {
                statusDisplayEl.textContent = uiStrings[currentLanguage].statusStopped;
            }
            updateButtonStates();
        }

        function resetDemo(updateStatus = true) {
            stopDemo(false);
            currentStepIndex = 0;
            displayStepContent(currentStepIndex);
            if (updateStatus) {
                statusDisplayEl.textContent = uiStrings[currentLanguage].statusReset;
            }
            updateButtonStates();
        }

        // Event Listeners
        langEnBtn.addEventListener('click', () => setLanguage('en'));
        langFrBtn.addEventListener('click', () => setLanguage('fr'));
        runDemoBtn.addEventListener('click', runDemo);
        stopDemoBtn.addEventListener('click', stopDemo);
        prevStepBtn.addEventListener('click', prevStep);
        nextStepBtn.addEventListener('click', () => nextStep(false));
        resetDemoBtn.addEventListener('click', resetDemo);

        // Initial Setup
        setLanguage(currentLanguage);
    </script>

</body>
</html>
